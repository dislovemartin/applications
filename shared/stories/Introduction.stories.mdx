import { Meta } from '@storybook/blocks';

<Meta title="Introduction/Welcome" />

# ACGS-PGP Framework Component Library

Welcome to the **ACGS-PGP (Artificial Constitution Governance System - Prompt Governance Protocol)** shared component library. This comprehensive collection of React components, hooks, and utilities powers the constitutional governance interface for the ACGS ecosystem.

## üèõÔ∏è Constitutional Governance Architecture

The ACGS system implements a novel approach to digital governance through constitutional principles, policy synthesis, and real-time compliance validation. This component library provides the user interface layer for interacting with the core ACGS services:

### Core Services Integration

- **AC Service (Port 8001)** - Artificial Constitution management
- **GS Service (Port 8003)** - Governance Synthesis engine  
- **PGC Service (Port 8005)** - Prompt Governance Compiler
- **Auth Service (Port 8002)** - Authentication and authorization
- **Integrity Service (Port 8006)** - System integrity monitoring
- **FV Service (Port 8004)** - Formal verification
- **EC Service (Port 8007)** - Event coordination

## üéØ Key Features

### ‚úÖ Constitutional Compliance
Every component is designed with constitutional governance principles in mind, ensuring that user interactions align with the democratic and transparent values of the ACGS system.

### ‚úÖ Service Integration
Seamless integration with all ACGS microservices through standardized APIs, error handling, and authentication flows.

### ‚úÖ Error Boundaries & Loading States
Comprehensive error handling with service-specific error boundaries and loading states that provide clear feedback during governance operations.

### ‚úÖ TypeScript & Validation
Full TypeScript support with runtime prop validation using Zod schemas, ensuring type safety and data integrity.

### ‚úÖ Accessibility
Built with accessibility in mind, following WCAG guidelines and providing screen reader support for governance interfaces.

### ‚úÖ Responsive Design
Mobile-first responsive design that works across all device sizes, ensuring governance participation is accessible everywhere.

## üìö Component Categories

### üîÑ Loading Components
- **Spinner** - Quick loading indicators for API calls
- **Skeleton** - Content placeholders for data-heavy components
- **Progress** - Multi-step operation progress tracking
- **LoadingOverlay** - Non-blocking loading states
- **LoadingButton** - Buttons with integrated loading states

### üõ°Ô∏è Error Handling
- **ErrorBoundary** - Basic error boundary with recovery options
- **AuthErrorBoundary** - Authentication-aware error handling
- **ServiceErrorBoundary** - Service-specific error boundaries for each ACGS service

### üèõÔ∏è Governance Components
- **ComplianceChecker** - Real-time policy compliance validation
- **PrincipleCard** - Constitutional principle display and management
- **PolicyCard** - Governance policy visualization and lifecycle management
- **ValidatedForm** - Form components with comprehensive validation

### üîß Higher-Order Components
- **withAuth** - Authentication and authorization wrapper
- **withLoading** - Loading state management
- **withErrorBoundary** - Error boundary integration
- **withProtectedComponent** - Composite protection (auth + loading + errors)

### üé£ Custom Hooks
- **useAuthExtended** - Enhanced authentication with role-based access
- **useApiExtended** - Advanced API client with caching and retries
- **useLoadingState** - Comprehensive loading state management
- **useServiceApi** - Service-specific API hooks

## üöÄ Getting Started

### Installation

```bash
npm install @acgs/shared
```

### Basic Usage

```tsx
import { ComplianceChecker, withAuth, useAuthExtended } from '@acgs/shared';

// Protected compliance checker
const ProtectedComplianceChecker = withAuth(ComplianceChecker, {
  requiredRoles: ['admin', 'moderator']
});

function GovernancePage() {
  const { isAuthenticated, canPerformAction } = useAuthExtended();
  
  if (!canPerformAction('check_compliance')) {
    return <div>Insufficient permissions</div>;
  }
  
  return (
    <ProtectedComplianceChecker
      onComplianceCheck={(result) => {
        console.log('Compliance result:', result);
      }}
    />
  );
}
```

### Service Integration

```tsx
import { useServiceApi } from '@acgs/shared';

function PrincipleManager() {
  const acApi = useServiceApi('AC');
  
  const createPrinciple = async (principleData) => {
    try {
      const result = await acApi.post('/principles/', principleData);
      console.log('Principle created:', result);
    } catch (error) {
      console.error('Failed to create principle:', error);
    }
  };
  
  return (
    // Component implementation
  );
}
```

## üîê Authentication & Authorization

The component library includes comprehensive authentication and authorization features:

- **Role-based access control** (admin, moderator, user, viewer)
- **Permission-based restrictions** for specific actions
- **Session management** with automatic refresh
- **Authentication-aware error boundaries**

## üìä Performance & Monitoring

- **Automatic caching** for API responses
- **Request deduplication** and retry logic
- **Performance monitoring** integration
- **Error tracking** and reporting
- **Loading state optimization** with minimum display times

## üß™ Testing

All components include comprehensive test coverage:

- **Unit tests** with Jest and React Testing Library
- **Integration tests** for service interactions
- **Accessibility tests** with automated a11y checking
- **Visual regression tests** through Storybook

## üìñ Documentation

Each component includes:

- **Comprehensive prop documentation** with TypeScript interfaces
- **Usage examples** and best practices
- **Integration guides** for ACGS services
- **Accessibility notes** and keyboard navigation
- **Performance considerations** and optimization tips

## ü§ù Contributing

When contributing to this component library:

1. Follow the established patterns for service integration
2. Include comprehensive TypeScript types and validation
3. Add error boundaries and loading states
4. Write Storybook stories with multiple scenarios
5. Ensure accessibility compliance
6. Test with all ACGS services

## üîó Related Resources

- [ACGS Architecture Documentation](https://docs.acgs.dev)
- [Constitutional Governance Principles](https://constitution.acgs.dev)
- [API Reference](https://api.acgs.dev)
- [Deployment Guide](https://deploy.acgs.dev)

---

*This component library is part of the ACGS-PGP Framework, enabling constitutional governance through technology. Built with React, TypeScript, and democratic principles.*
